<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ cv.name }} - CV</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/preview.css">
    <link rel="stylesheet" href="/css/print.css" media="print">
</head>
<body>
    <div class="download-actions">
        <button type="button" class="preview-toggle" data-js="preview-toggle" aria-pressed="false">Preview Print Layout</button>
        <button type="button" data-js="print-button">Download PDF</button>
    </div>
    <div class="page">
        {{ content | safe }}
    </div>
    <script>
        (function () {
            const previewToggle = document.querySelector('[data-js="preview-toggle"]');
            const printButton = document.querySelector('[data-js="print-button"]');

            if (!previewToggle || !printButton) {
                return;
            }

            const updatePreviewLabel = (isActive) => {
                previewToggle.setAttribute('aria-pressed', isActive ? 'true' : 'false');
                previewToggle.textContent = isActive ? 'Exit Print Preview' : 'Preview Print Layout';
            };

            previewToggle.addEventListener('click', () => {
                const isActive = document.body.classList.toggle('print-preview');
                updatePreviewLabel(isActive);
            });

            printButton.addEventListener('click', () => {
                window.print();
            });
        })();
    </script>
</body>
</html>
